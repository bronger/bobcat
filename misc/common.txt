>>> from common import *
>>> #
>>> #  First, let's test "parse_local_variables"
>>> #
>>> parse_local_variables("This is not a local variables line", force=True)
Traceback (most recent call last):
    ...
LocalVariablesError: Malformed local variables line
>>> parse_local_variables(".. -*- coding: utf-8;+ Blah: Blubb -*-\n")
Traceback (most recent call last):
    ...
LocalVariablesError: Malformed key '+ blah' in local variables line
>>> parse_local_variables("; -*- codiöng: utf-8 -*-\n", comment_marker="(#|;)")
Traceback (most recent call last):
    ...
LocalVariablesError: Malformed key 'codiÃ¶ng' in local variables line
>>> #
>>> #  Now for "SettingsDict"
>>> #
>>> settings["General.verbose"] = True
>>> settings.set_default("General.verbose", None, "bool")
>>> settings.close_section("General")
>>> read_files = settings.load_from_files("../misc/test.conf")
Traceback (most recent call last):
    ...
SettingWarning: setting 'Paths.backends' misses predefined variable 'rootdir'
>>> settings.set_predefined_variable("rootdir", "~/src/bobcat/")
>>> read_files = settings.load_from_files("../misc/test.conf")
Traceback (most recent call last):
    ...
SettingWarning: file "../misc/test.conf": setting 'General.quiet = true': unknown setting key; section already closed
>>> settings["General.verbose"] = False
>>> settings.set_default("quiet.", "true")
Traceback (most recent call last):
    ...
AssertionError: invalid setting 'quiet.', either section or option is empty
>>> settings.set_default(".quiet", "true")
Traceback (most recent call last):
    ...
AssertionError: invalid setting '.quiet', either section or option is empty
>>> settings = SettingsDict()
>>> settings.set_predefined_variable("rootdir", "~/src/bobcat/")
>>> settings.set_default("General.quiet", True)
>>> read_files = settings.load_from_files("../misc/test.conf")
>>> settings["General.quieT"]
Traceback (most recent call last):
    ...
KeyError: 'General.quieT'
>>> settings["general.quiet"]
Traceback (most recent call last):
    ...
KeyError: 'general.quiet'
>>> settings["General.outfile"] = "/dev/null"
>>> settings.set_default("General.quiet", "off")
Traceback (most recent call last):
    ...
AssertionError: setting 'General.quiet' has already a default value (True)
>>> settings.set_predefined_variable("rootdir", "~/src/gummi/")
Traceback (most recent call last):
    ...
AssertionError: predefined variable 'rootdir' is already set to value '~/src/bobcat/'
>>> settings.set_default("General.Quiet", "")
>>> read_files = settings.load_from_files(["../misc/test.conf", "../misc/test2.conf"])
>>> settings["General.quiet"]
True
>>> read_files = settings.load_from_files("../misc/test3.conf")
>>> settings.set_default("General.a_switch", "on")
>>> read_files = settings.load_from_files("../misc/test4.conf")
Traceback (most recent call last):
    ...
SettingWarning: setting 'General.not.allowed' contains a dot in the option part; it was ignored
>>> warnings.resetwarnings()
>>> warnings.simplefilter("ignore")
>>> read_files = settings.load_from_files("../misc/test3.conf")
>>> settings["General.quiet"]
False
